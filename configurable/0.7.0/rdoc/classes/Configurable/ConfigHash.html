<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Configurable::ConfigHash</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Configurable::ConfigHash</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/configurable/config_hash_rb.html">
                lib/configurable/config_hash.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="ConfigHash.html">ConfigHash</a> acts like a hash that maps get and
set operations as specified in a <a
href="../Configurable.html">Configurable</a>&#8216;s class configurations.
</p>
<pre>
  class Sample
    include Configurable
    config :key
  end

  sample = Sample.new
  sample.config.class               # =&gt; ConfigHash

  sample.key = 'value'
  sample.config[:key]               # =&gt; 'value'

  sample.config[:key] = 'another'
  sample.key                        # =&gt; 'another'
</pre>
<p>
Non-configuration <a href="ConfigHash.html#M000107">keys</a> are sent to an
underlying data store:
</p>
<pre>
  sample.config[:not_delegated] = 'value'
  sample.config[:not_delegated]     # =&gt; 'value'

  sample.config.store               # =&gt; {:not_delegated =&gt; 'value'}
  sample.config.to_hash             # =&gt; {:key =&gt; 'another', :not_delegated =&gt; 'value'}
</pre>
<h4><a href="IndifferentAccess.html">IndifferentAccess</a></h4>
<p>
A <a href="ConfigHash.html">ConfigHash</a> uses the receiver class
configurations to determine when and how to map get/set operations. In
cases where multiple <a href="ConfigHash.html#M000107">keys</a> need to map
in the same way (for example when you want indifferent access for strings
and symbols), simply extend the class configurations so that the AGET ([])
method returns the correct <a href="Config.html">Config</a> in all cases.
</p>
<h4>Inconsistency</h4>
<p>
ConfigHashes can fall into an inconsistent state if you manually add values
to store that would normally be mapped to the receiver. This is both easy
to avoid and easy to repair.
</p>
<p>
To avoid inconsistency, don&#8216;t manually add values to the store and
set import_store to true during initialization. To repair inconsistency, <a
href="ConfigHash.html#M000103">import</a> the current store to self.
</p>
<pre>
  config_hash = Sample.new.config
  config_hash[:key] = 'a'
  config_hash.store[:key] = 'b'

  config_hash[:key]          # =&gt; 'a'
  config_hash.to_hash        # =&gt; {:key =&gt; 'b'}
  config_hash.inconsistent?  # =&gt; true

  config_hash.import(config_hash.store)

  config_hash[:key]          # =&gt; 'b'
  config_hash.to_hash        # =&gt; {:key =&gt; 'b'}
  config_hash.inconsistent?  # =&gt; false
</pre>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000111">==</a>&nbsp;&nbsp;
      <a href="#M000105">[]</a>&nbsp;&nbsp;
      <a href="#M000106">[]=</a>&nbsp;&nbsp;
      <a href="#M000102">configs</a>&nbsp;&nbsp;
      <a href="#M000110">each_pair</a>&nbsp;&nbsp;
      <a href="#M000108">has_key?</a>&nbsp;&nbsp;
      <a href="#M000103">import</a>&nbsp;&nbsp;
      <a href="#M000104">inconsistent?</a>&nbsp;&nbsp;
      <a href="#M000113">inspect</a>&nbsp;&nbsp;
      <a href="#M000107">keys</a>&nbsp;&nbsp;
      <a href="#M000109">merge!</a>&nbsp;&nbsp;
      <a href="#M000101">new</a>&nbsp;&nbsp;
      <a href="#M000112">to_hash</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">receiver</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The bound receiver

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">store</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The underlying data store; setting values in store directly can result in
an inconsistent state. Use []= instead.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000101" class="method-detail">
        <a name="M000101"></a>

        <div class="method-heading">
          <a href="#M000101" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(receiver, store={}, import_store=true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes a <a href="ConfigHash.html#M000101">new</a> <a
href="ConfigHash.html">ConfigHash</a>. Initialize normally imports values
from store to ensure it doesn&#8216;t contain entries that could be stored
on the receiver.
</p>
<p>
Setting import_store to false allows quick initialization but can result in
an inconsistent state.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000101-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000101-source">
<pre>
    <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 77</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">store</span>={}, <span class="ruby-identifier">import_store</span>=<span class="ruby-keyword kw">true</span>)
78:       <span class="ruby-ivar">@receiver</span> = <span class="ruby-identifier">receiver</span>
79:       <span class="ruby-ivar">@store</span> = <span class="ruby-identifier">store</span>
80:       
81:       <span class="ruby-identifier">import</span>(<span class="ruby-identifier">store</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">import_store</span>
82:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000111" class="method-detail">
        <a name="M000111"></a>

        <div class="method-heading">
          <a href="#M000111" class="method-signature">
          <span class="method-name">==</span><span class="method-args">(another)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Equal if the <a href="ConfigHash.html#M000112">to_hash</a> values of self
and another are equal.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000111-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000111-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 166</span>
166:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">another</span>)
167:       <span class="ruby-identifier">another</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">to_hash</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">another</span>.<span class="ruby-identifier">to_hash</span>
168:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000105" class="method-detail">
        <a name="M000105"></a>

        <div class="method-heading">
          <a href="#M000105" class="method-signature">
          <span class="method-name">[]</span><span class="method-args">(key)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieves the value for the key, either from the receiver or the store.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000105-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000105-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">key</span>)
112:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span> = <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>]
113:         <span class="ruby-identifier">config</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">receiver</span>)
114:       <span class="ruby-keyword kw">else</span>
115:         <span class="ruby-identifier">store</span>[<span class="ruby-identifier">key</span>]
116:       <span class="ruby-keyword kw">end</span>
117:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000106" class="method-detail">
        <a name="M000106"></a>

        <div class="method-heading">
          <a href="#M000106" class="method-signature">
          <span class="method-name">[]=</span><span class="method-args">(key, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Stores a value for the key, either on the receiver or in the store.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000106-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000106-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 120</span>
120:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
121:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span> = <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>]
122:         <span class="ruby-identifier">config</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">value</span>)
123:       <span class="ruby-keyword kw">else</span>
124:         <span class="ruby-identifier">store</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
125:       <span class="ruby-keyword kw">end</span>
126:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000102" class="method-detail">
        <a name="M000102"></a>

        <div class="method-heading">
          <a href="#M000102" class="method-signature">
          <span class="method-name">configs</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns receiver.class.configurations.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000102-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000102-source">
<pre>
    <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 85</span>
85:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configs</span>
86:       <span class="ruby-identifier">receiver</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">configurations</span>
87:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000110" class="method-detail">
        <a name="M000110"></a>

        <div class="method-heading">
          <a href="#M000110" class="method-signature">
          <span class="method-name">each_pair</span><span class="method-args">( {|key, value| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Calls block once for each key-value pair stored in self.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000110-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000110-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 155</span>
155:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each_pair</span> <span class="ruby-comment cmt"># :yields: key, value</span>
156:       <span class="ruby-identifier">configs</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
157:         <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">config</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">receiver</span>))
158:       <span class="ruby-keyword kw">end</span>
159:       
160:       <span class="ruby-identifier">store</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
161:         <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
162:       <span class="ruby-keyword kw">end</span>
163:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000108" class="method-detail">
        <a name="M000108"></a>

        <div class="method-heading">
          <a href="#M000108" class="method-signature">
          <span class="method-name">has_key?</span><span class="method-args">(key)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
True if the key is a key in <a href="ConfigHash.html#M000102">configs</a>
or store.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000108-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000108-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 134</span>
134:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
135:       <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">store</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>) 
136:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000103" class="method-detail">
        <a name="M000103"></a>

        <div class="method-heading">
          <a href="#M000103" class="method-signature">
          <span class="method-name">import</span><span class="method-args">(store)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Imports stored values that can be mapped to the receiver. The values are
removed from store in the process. Returns self.
</p>
<p>
Primarily used to create a consistent state for self (see above).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000103-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000103-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 93</span>
 93:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">import</span>(<span class="ruby-identifier">store</span>)
 94:       <span class="ruby-identifier">configs</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configs</span> <span class="ruby-comment cmt"># cache as an optimization</span>
 95:       <span class="ruby-identifier">store</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
 96:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">config</span> = <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>]
 97:         <span class="ruby-identifier">config</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">store</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>))
 98:       <span class="ruby-keyword kw">end</span>
 99:       
100:       <span class="ruby-keyword kw">self</span>
101:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000104" class="method-detail">
        <a name="M000104"></a>

        <div class="method-heading">
          <a href="#M000104" class="method-signature">
          <span class="method-name">inconsistent?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the store has entries that can be stored on the receiver.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000104-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000104-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 105</span>
105:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inconsistent?</span>
106:       <span class="ruby-identifier">configs</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configs</span> <span class="ruby-comment cmt"># cache as an optimization</span>
107:       <span class="ruby-identifier">store</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>] }
108:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000113" class="method-detail">
        <a name="M000113"></a>

        <div class="method-heading">
          <a href="#M000113" class="method-signature">
          <span class="method-name">inspect</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an inspection string.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000113-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000113-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 194</span>
194:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
195:       <span class="ruby-node">&quot;#&lt;#{self.class}:#{object_id} to_hash=#{to_hash.inspect}&gt;&quot;</span>
196:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000107" class="method-detail">
        <a name="M000107"></a>

        <div class="method-heading">
          <a href="#M000107" class="method-signature">
          <span class="method-name">keys</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the union of <a href="ConfigHash.html#M000102">configs</a> and
store <a href="ConfigHash.html#M000107">keys</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000107-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000107-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">keys</span>
130:       <span class="ruby-identifier">configs</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">store</span>.<span class="ruby-identifier">keys</span>
131:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000109" class="method-detail">
        <a name="M000109"></a>

        <div class="method-heading">
          <a href="#M000109" class="method-signature">
          <span class="method-name">merge!</span><span class="method-args">(another)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Merges another with self.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000109-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000109-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 139</span>
139:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">another</span>)
140:       <span class="ruby-comment cmt"># cache configs and inline set as a significant optimization</span>
141:       <span class="ruby-identifier">configs</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">configs</span>
142:       (<span class="ruby-identifier">configs</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">another</span>.<span class="ruby-identifier">keys</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
143:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">another</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
144:         
145:         <span class="ruby-identifier">value</span> = <span class="ruby-identifier">another</span>[<span class="ruby-identifier">key</span>]
146:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span> = <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>]
147:           <span class="ruby-identifier">config</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">value</span>)
148:         <span class="ruby-keyword kw">else</span>
149:           <span class="ruby-identifier">store</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
150:         <span class="ruby-keyword kw">end</span>
151:       <span class="ruby-keyword kw">end</span>
152:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000112" class="method-detail">
        <a name="M000112"></a>

        <div class="method-heading">
          <a href="#M000112" class="method-signature">
          <span class="method-name">to_hash</span><span class="method-args">(scrub=false) {|hash, key, value| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns self as a hash. Any <a href="ConfigHash.html">ConfigHash</a> values
are recursively hashified, to account for nesting.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000112-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000112-source">
<pre>
     <span class="ruby-comment cmt"># File lib/configurable/config_hash.rb, line 172</span>
172:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">scrub</span>=<span class="ruby-keyword kw">false</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
173:       <span class="ruby-identifier">hash</span> = {}
174:       <span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
175:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">ConfigHash</span>)
176:           <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">scrub</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
177:         <span class="ruby-keyword kw">end</span>
178:         
179:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scrub</span>
180:           <span class="ruby-identifier">config</span> = <span class="ruby-identifier">configs</span>[<span class="ruby-identifier">key</span>]
181:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">config</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">config</span>.<span class="ruby-identifier">default</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value</span>
182:         <span class="ruby-keyword kw">end</span>
183:         
184:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
185:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
186:         <span class="ruby-keyword kw">else</span>
187:           <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
188:         <span class="ruby-keyword kw">end</span>
189:       <span class="ruby-keyword kw">end</span>
190:       <span class="ruby-identifier">hash</span>
191:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>