<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 24 13:54:07 -0600 2011</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1><a href="http://tap.rubyforge.org/configurable">Configurable</a></h1>
<p>
Class configurations that map to the command line.
</p>
<h2>Description</h2>
<p>
<a href="../classes/Configurable.html">Configurable</a> allows the
declaration of class configurations. Configurations are inheritable,
delegate to methods, and have hash-like access. <a
href="../classes/Configurable.html">Configurable</a> maps configurations to
the command line through <a
href="../classes/ConfigParser.html">ConfigParser</a> and is used by the <a
href="http://tap.rubyforge.org">Tap</a> framework.
</p>
<p>
Check out these links for development, and bug tracking.
</p>
<ul>
<li><a href="http://tap.rubyforge.org/configurable">Website</a>

</li>
<li><a href="http://github.com/bahuvrihi/configurable/tree/master">Github</a>

</li>
<li><a
href="http://bahuvrihi.lighthouseapp.com/projects/21202-configurable/tickets?q=state%3Aopen">Lighthouse</a>

</li>
<li><a href="http://groups.google.com/group/ruby-on-tap">Google Group</a>

</li>
</ul>
<h2>Usage</h2>
<p>
Use the config method to declare class configurations. A block may be
provided to validate inputs, and many standard validations are available
through the &#8216;c&#8217; method (an alias for the <a
href="../classes/Configurable/Validation.html">Validation</a> module).
</p>
<pre>
  class ConfigClass
    include Configurable

    config :key, 'default', :short =&gt; 'k'   # a simple config with short
    config :flag, false, &amp;c.flag            # a flag config
    config :switch, false, &amp;c.switch        # a --[no-]switch config
    config :num, 10, &amp;c.integer             # integer only
    config :range, 1..10, &amp;c.range          # range only
    config :upcase, 'default' do |value|    # custom transformation
      value.upcase
    end

    def initialize(overrides={})
      initialize_config(overrides)
    end
  end
</pre>
<p>
A <a href="../classes/ConfigParser.html">ConfigParser</a> can parse
configurations from command line arguments, and turn them into a documented
help string:
</p>
<pre>
  parser = ConfigParser.new
  parser.add(ConfigClass.configurations)

  parser.parse &quot;one two --key=value --flag --no-switch --num 8 --range a..z three&quot;
  # =&gt; ['one', 'two', 'three']

  parser.config
  # =&gt; {
  # :key =&gt; 'value',
  # :flag =&gt; true,
  # :switch =&gt; false,
  # :num =&gt; '8',
  # :range =&gt; 'a..z',
  # :upcase =&gt; 'default'
  # }

  &quot;\n&quot; + parser.to_s
  # =&gt; %Q{
  #    -k, --key KEY                    a simple config with short
  #        --flag                       a flag config
  #        --[no-]switch                a --[no-]switch config
  #        --num NUM                    integer only
  #        --range RANGE                range only
  #        --upcase UPCASE              custom transformation
  # }
</pre>
<p>
<a href="../classes/Configurable.html">Configurable</a> classes typically
call initialize_config to set configurations during initialization. The
validation/transformation blocks are called as configurations are set.
Notice how the :range and :upcase values have been transformed from the
input config.
</p>
<pre>
  c = ConfigClass.new(parser.config)
  c.config.to_hash
  # =&gt; {
  # :key =&gt; 'value',
  # :flag =&gt; true,
  # :switch =&gt; false,
  # :num =&gt; 8,
  # :range =&gt; 'a'..'z',       # notice these values
  # :upcase =&gt; 'DEFAULT'      # have been transformed
  # }
</pre>
<p>
Configurations automatically generate accessors (the blocks are basically
writer methods), but they are also accessible through the hash-like config
object. Configurations are validated every time they are set, regardless of
whether they are set through an accessor or config.
</p>
<pre>
  c.upcase                    # =&gt; 'DEFAULT'

  c.config[:upcase] = 'neW valuE'
  c.upcase                    # =&gt; 'NEW VALUE'

  c.upcase = 'fiNal Value'
  c.config[:upcase]           # =&gt; 'FINAL VALUE'
</pre>
<p>
By default config treats string and symbol keys identically, making YAML an
obvious choice for configuration files.
</p>
<pre>
  yaml_str = %Q{
  key: a new value
  flag: false
  range: 1..100
  }

  c.reconfigure(YAML.load(yaml_str))
  c.config.to_hash
  # =&gt; {
  # :key =&gt; 'a new value',
  # :flag =&gt; false,
  # :switch =&gt; false,
  # :num =&gt; 8,
  # :range =&gt; 1..100,
  # :upcase =&gt; 'FINAL VALUE'
  # }
</pre>
<p>
See the <a href="../classes/Configurable.html">Configurable</a> module for
more details.
</p>
<h2>Installation</h2>
<p>
<a href="../classes/Configurable.html">Configurable</a> is available as a
gem on <a href="http://rubyforge.org/projects/tap">RubyForge</a>. Use:
</p>
<pre>
  % gem install configurable
</pre>
<h2>Info</h2>
<p>
Copyright (c) 2008-2009, Regents of the University of Colorado.
</p>
<table>
<tr><td valign="top">Developer:</td><td><a href="http://bahuvrihi.wordpress.com">Simon Chiang</a>, <a
href="http://biomol.uchsc.edu/">Biomolecular Structure Program</a>, <a
href="http://hsc-proteomics.uchsc.edu/hansenlab/">Hansen Lab</a>

</td></tr>
<tr><td valign="top">Support:</td><td>CU Denver School of Medicine Deans Academic Enrichment Fund

</td></tr>
<tr><td valign="top">License:</td><td><a href="MIT-LICENSE.html">MIT-Style</a>

</td></tr>
</table>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>