<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Lazydoc::Utils</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Lazydoc::Utils</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/lazydoc/utils_rb.html">
                lib/lazydoc/utils.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A number of utility methods used by <a href="Comment.html">Comment</a>,
factored out for testing and re-use.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000017">convert_to_scanner</a>&nbsp;&nbsp;
      <a href="#M000022">determine_line_number</a>&nbsp;&nbsp;
      <a href="#M000024">match_index</a>&nbsp;&nbsp;
      <a href="#M000018">scan</a>&nbsp;&nbsp;
      <a href="#M000019">scan_args</a>&nbsp;&nbsp;
      <a href="#M000023">scan_index</a>&nbsp;&nbsp;
      <a href="#M000020">scan_trailer</a>&nbsp;&nbsp;
      <a href="#M000016">split_lines</a>&nbsp;&nbsp;
      <a href="#M000021">wrap</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="#M000017" class="method-signature">
          <span class="method-name">convert_to_scanner</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Converts str to a StringScanner (or returns str if it already is a
StringScanner). Raises a TypeError if str is not a String or a
StringScanner.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000017-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000017-source">
<pre>
    <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">convert_to_scanner</span>(<span class="ruby-identifier">str</span>)
18:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">str</span>
19:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span> <span class="ruby-keyword kw">then</span> <span class="ruby-constant">StringScanner</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>)
20:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">StringScanner</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">str</span>
21:       <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-node">&quot;can't convert #{str.class} into StringScanner&quot;</span>
22:       <span class="ruby-keyword kw">end</span>
23:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="#M000022" class="method-signature">
          <span class="method-name">determine_line_number</span><span class="method-args">(scanner)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the line at which scanner currently resides. The position of
scanner is not modified.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000022-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000022-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 177</span>
177:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">determine_line_number</span>(<span class="ruby-identifier">scanner</span>)
178:       <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">string</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>].<span class="ruby-identifier">count</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
179:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="#M000024" class="method-signature">
          <span class="method-name">match_index</span><span class="method-args">(lines, regexp)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the index of the line in lines matching regexp, or nil if no line
matches regexp.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000024-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000024-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match_index</span>(<span class="ruby-identifier">lines</span>, <span class="ruby-identifier">regexp</span>)
201:       <span class="ruby-identifier">index</span> = <span class="ruby-value">0</span>
202:       <span class="ruby-identifier">lines</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
203:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">index</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">regexp</span>
204:         <span class="ruby-identifier">index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
205:       <span class="ruby-keyword kw">end</span>
206:       <span class="ruby-keyword kw">nil</span>
207:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="#M000018" class="method-signature">
          <span class="method-name">scan</span><span class="method-args">(line) {|fragment| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Scan determines if and how to add a line fragment to a comment and yields
the appropriate fragments to the block. Returns true if fragments are
yielded and false otherwise.
</p>
<p>
Content may be built from an array of lines using <a
href="Utils.html#M000018">scan</a> like so:
</p>
<pre>
  lines = [
    &quot;# comments spanning multiple&quot;,
    &quot;# lines are collected&quot;,
    &quot;#&quot;,
    &quot;#   while indented lines&quot;,
    &quot;#   are preserved individually&quot;,
    &quot;#    &quot;,
    &quot;not a comment line&quot;,
    &quot;# skipped since the loop breaks&quot;,
    &quot;# at the first non-comment line&quot;]

  c = Comment.new
  lines.each do |line|
    break unless Utils.scan(line) do |fragment|
      c.push(fragment)
    end
  end

  c.content
  # =&gt; [
  # ['comments spanning multiple', 'lines are collected'],
  # [''],
  # ['  while indented lines'],
  # ['  are preserved individually'],
  # [''],
  # []]
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000018-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000018-source">
<pre>
    <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 58</span>
58:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan</span>(<span class="ruby-identifier">line</span>) <span class="ruby-comment cmt"># :yields: fragment</span>
59:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^[ \t]*#[ \t]?(([ \t]*).*?)\r?$/</span>
60:       <span class="ruby-identifier">categorize</span>(<span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fragment</span><span class="ruby-operator">|</span>
61:         <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">fragment</span>)
62:       <span class="ruby-keyword kw">end</span>
63:       <span class="ruby-keyword kw">true</span>
64:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="#M000019" class="method-signature">
          <span class="method-name">scan_args</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Parses an argument string (anything following the method name in a standard
method definition, including parenthesis, comments, default values, etc)
into an array of strings.
</p>
<pre>
  Utils.parse_args(&quot;(a, b='default', *c, &amp;block)&quot;)
  # =&gt; [&quot;a&quot;, &quot;b='default'&quot;, &quot;*c&quot;, &quot;&amp;block&quot;]
</pre>
<p>
Note the %-syntax for strings and arrays is not fully supported, ie %w, %Q,
%q, etc. may not parse correctly. The same is true for multiline argument
strings.
</p>
<p>
Accepts a String or a StringScanner.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000019-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000019-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 78</span>
 78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan_args</span>(<span class="ruby-identifier">str</span>)
 79:       <span class="ruby-identifier">scanner</span> = <span class="ruby-identifier">convert_to_scanner</span>(<span class="ruby-identifier">str</span>)
 80:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">string</span>
 81:       
 82:       <span class="ruby-comment cmt"># skip whitespace and leading LPAREN</span>
 83:       <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">skip</span>(<span class="ruby-regexp re">/\s*\(?\s*/</span>) 
 84:       
 85:       <span class="ruby-identifier">args</span> = []
 86:       <span class="ruby-identifier">brakets</span> = <span class="ruby-identifier">braces</span> = <span class="ruby-identifier">parens</span> = <span class="ruby-value">0</span>
 87:       <span class="ruby-identifier">start</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>
 88:       <span class="ruby-identifier">broke</span> = <span class="ruby-keyword kw">false</span>
 89:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">skip</span>(<span class="ruby-regexp re">/.*?['&quot;#,\(\)\{\}\[\]]/</span>)
 90:         <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
 91:         
 92:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">pos</span>]
 93:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?,</span>,<span class="ruby-keyword kw">nil</span>
 94:           <span class="ruby-comment cmt"># skip if in brakets, braces, or parenthesis</span>
 95:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parens</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">brakets</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">braces</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
 96:           
 97:           <span class="ruby-comment cmt"># ok, found an arg</span>
 98:           <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">start</span>, <span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-identifier">start</span>].<span class="ruby-identifier">strip</span>
 99:           <span class="ruby-identifier">start</span> = <span class="ruby-identifier">pos</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
100:         
101:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?#</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">broke</span> = <span class="ruby-keyword kw">true</span>; <span class="ruby-keyword kw">break</span>        <span class="ruby-comment cmt"># break on a comment</span>
102:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">skip_quote</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-regexp re">/'/</span>)   <span class="ruby-comment cmt"># parse over quoted strings</span>
103:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">skip_quote</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-regexp re">/&quot;/</span>)   <span class="ruby-comment cmt"># parse over double-quoted string</span>
104:           
105:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?(</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">parens</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>                <span class="ruby-comment cmt"># for brakets, braces, and parenthesis</span>
106:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?)</span>                                 <span class="ruby-comment cmt"># simply track the nesting EXCEPT for</span>
107:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parens</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>                        <span class="ruby-comment cmt"># RPAREN.  If the closing parenthesis</span>
108:             <span class="ruby-identifier">broke</span> = <span class="ruby-keyword kw">true</span>; <span class="ruby-keyword kw">break</span>
109:           <span class="ruby-keyword kw">end</span>
110:           <span class="ruby-identifier">parens</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>                           <span class="ruby-comment cmt"># is found, break.</span>
111:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?[</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">braces</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
112:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?]</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">braces</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
113:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?{</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">brakets</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
114:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?}</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">brakets</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
115:         <span class="ruby-keyword kw">end</span>
116:       <span class="ruby-keyword kw">end</span>
117:       
118:       <span class="ruby-comment cmt"># parse out the final arg.  if the loop broke (ie </span>
119:       <span class="ruby-comment cmt"># a comment or the closing parenthesis was found) </span>
120:       <span class="ruby-comment cmt"># then the end position is determined by the </span>
121:       <span class="ruby-comment cmt"># scanner, otherwise take all that remains</span>
122:       <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">broke</span> <span class="ruby-value">? </span><span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">length</span>
123:       <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">start</span>, <span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-identifier">start</span>].<span class="ruby-identifier">strip</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">start</span>
124: 
125:       <span class="ruby-identifier">args</span>
126:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="#M000023" class="method-signature">
          <span class="method-name">scan_index</span><span class="method-args">(scanner, regexp)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the index of the line where scanner ends up after the first match
to regexp (starting at position 0). The existing position of scanner is not
modified by this method. Returns nil if the scanner cannot match regexp.
</p>
<pre>
  scanner = StringScanner.new %Q{zero\none\ntwo\nthree}
  Utils.scan_index(scanner, /two/)         # =&gt; 2
  Utils.scan_index(scanner, /no match/)    # =&gt; nil
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000023-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000023-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 190</span>
190:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan_index</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-identifier">regexp</span>)
191:       <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>
192:       <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>
193:       <span class="ruby-identifier">n</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">skip_until</span>(<span class="ruby-identifier">regexp</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">determine_line_number</span>(<span class="ruby-identifier">scanner</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
194:       <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span> = <span class="ruby-identifier">pos</span>
195:       <span class="ruby-identifier">n</span>
196:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="#M000020" class="method-signature">
          <span class="method-name">scan_trailer</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Scans a stripped trailing comment off the input. Returns nil for strings
without a trailing comment.
</p>
<pre>
  Utils.scan_trailer &quot;str with # trailer&quot;           # =&gt; &quot;trailer&quot;
  Utils.scan_trailer &quot;'# in str' # trailer&quot;         # =&gt; &quot;trailer&quot;
  Utils.scan_trailer &quot;str with without trailer&quot;     # =&gt; nil
</pre>
<p>
Note the %Q and %q syntax for defining strings is not supported within the
leader and may not parse correctly:
</p>
<pre>
  Utils.scan_trailer &quot;%Q{# in str} # trailer&quot;       # =&gt; &quot;in str} # trailer&quot;
</pre>
<p>
Accepts a String or a StringScanner.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000020-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000020-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 141</span>
141:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan_trailer</span>(<span class="ruby-identifier">str</span>)
142:       <span class="ruby-identifier">scanner</span> = <span class="ruby-identifier">convert_to_scanner</span>(<span class="ruby-identifier">str</span>)
143: 
144:       <span class="ruby-identifier">args</span> = []
145:       <span class="ruby-identifier">brakets</span> = <span class="ruby-identifier">braces</span> = <span class="ruby-identifier">parens</span> = <span class="ruby-value">0</span>
146:       <span class="ruby-identifier">start</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span>
147:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">skip</span>(<span class="ruby-regexp re">/.*?['&quot;#]/</span>)
148:         <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">pos</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
149:         
150:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">pos</span>]
151:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?#</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">scanner</span>.<span class="ruby-identifier">rest</span>.<span class="ruby-identifier">strip</span>     <span class="ruby-comment cmt"># return the trailer</span>
152:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">skip_quote</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-regexp re">/'/</span>)      <span class="ruby-comment cmt"># parse over quoted strings</span>
153:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">?&quot;</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">skip_quote</span>(<span class="ruby-identifier">scanner</span>, <span class="ruby-regexp re">/&quot;/</span>)      <span class="ruby-comment cmt"># parse over double-quoted string</span>
154:         <span class="ruby-keyword kw">end</span>
155:       <span class="ruby-keyword kw">end</span>
156:       
157:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
158:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="#M000016" class="method-signature">
          <span class="method-name">split_lines</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000016-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000016-source">
<pre>
    <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 10</span>
10:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">split_lines</span>(<span class="ruby-identifier">str</span>)
11:       (<span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-value">? </span>[<span class="ruby-value str">&quot;&quot;</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\r?\n/</span>))
12:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="#M000021" class="method-signature">
          <span class="method-name">wrap</span><span class="method-args">(line, cols=80, tabsize=2)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Splits a line of text along whitespace breaks into fragments of cols width.
Tabs in the line will be expanded into tabsize spaces; fragments are
rstripped of whitespace.
</p>
<pre>
  Utils.wrap(&quot;some line that will wrap&quot;, 10)       # =&gt; [&quot;some line&quot;, &quot;that will&quot;, &quot;wrap&quot;]
  Utils.wrap(&quot;     line that will wrap    &quot;, 10)   # =&gt; [&quot;     line&quot;, &quot;that will&quot;, &quot;wrap&quot;]
  Utils.wrap(&quot;                            &quot;, 10)   # =&gt; []
</pre>
<p>
The wrapping algorithm is slightly modified from: <a
href="http://blog.macromates.com/2006/wrapping-text-with-regular-expressions">blog.macromates.com/2006/wrapping-text-with-regular-expressions</a>/
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000021-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000021-source">
<pre>
     <span class="ruby-comment cmt"># File lib/lazydoc/utils.rb, line 170</span>
170:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">line</span>, <span class="ruby-identifier">cols</span>=<span class="ruby-value">80</span>, <span class="ruby-identifier">tabsize</span>=<span class="ruby-value">2</span>)
171:       <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\t/</span>, <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">tabsize</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tabsize</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
172:       <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/(.{1,#{cols}})( +|$\r?\n?)|(.{1,#{cols}})/</span>, <span class="ruby-value str">&quot;\\1\\3\n&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/\s*?\n/</span>)
173:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>